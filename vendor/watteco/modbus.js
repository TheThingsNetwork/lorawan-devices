"use strict";function _readOnlyError(e){throw new TypeError('"'+e+'" is read-only')}function _defineProperties(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var a=_toPrimitive(e,"string");return"symbol"==_typeof(a)?a:a+""}function _toPrimitive(e,a){if("object"!=_typeof(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,a||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _callSuper(e,a,t){return a=_getPrototypeOf(a),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(a,t||[],_getPrototypeOf(e).constructor):a.apply(e,t))}function _possibleConstructorReturn(e,a){if(a&&("object"==_typeof(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),a&&_setPrototypeOf(e,a)}function _wrapNativeSuper(e){var a="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(e))return a.get(e);a.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)},_wrapNativeSuper(e)}function _construct(e,a,t){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,a);var n=new(e.bind.apply(e,r));return t&&_setPrototypeOf(n,t.prototype),n}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _isNativeFunction(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(a){return"function"==typeof e}}function _setPrototypeOf(e,a){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e},_setPrototypeOf(e,a)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var driver;!function(){var e={652:function(e){var a=[];a[0]=0,a[1]=1,a[2]=4,a[3]=4,a[4]=8,a[5]=8,a[6]=16,a[7]=16,a[8]=24,a[9]=24,a[10]=32,a[11]=32,a[12]=32;var t=[[{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:3,lbl:5},{sz:4,lbl:9},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}],[{sz:7,lbl:111},{sz:5,lbl:26},{sz:4,lbl:12},{sz:3,lbl:3},{sz:3,lbl:7},{sz:2,lbl:2},{sz:2,lbl:0},{sz:3,lbl:2},{sz:6,lbl:54},{sz:9,lbl:443},{sz:9,lbl:441},{sz:10,lbl:885},{sz:10,lbl:884},{sz:10,lbl:880},{sz:11,lbl:1763},{sz:11,lbl:1762}],[{sz:4,lbl:9},{sz:3,lbl:5},{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}]];function r(e,a,t,r){return{uncompressSamples:[{data_relative_timestamp:r,data:{value:s(e,a),label:t}}],codingType:0,codingTable:0,resolution:null}}function n(e,a){for(var t=0;t<e.length;t++)if(e[t].taglbl===a.lbl)return t;throw new Error("Batch : Cannot find i1 in argList")}function i(e,a){if(a){var t=e.getNextBifromHi(1);return o(e,a,t)}return e.getNextSample(10)}function o(e,a,t){return t>14?e.getNextSample(10):t>0?function(e,a,t){return e.getNextSample(10,t)+a+Math.pow(2,t)-1}(e,a,t):a}function s(e,a){var t=e.getNextSample(a);return 12===a?function(e){var a=2147483648&e?-1:1,t=(e>>23&255)-127,r=8388607&e;if(128===t)return a*(r?Number.NaN:Number.POSITIVE_INFINITY);if(-127===t){if(0===r)return 0*a;t=-126,r/=1<<22}else r=(r|1<<23)/(1<<23);return a*r*Math.pow(2,t)}(t):t}function d(e,a,t,r,n){var i=e.getNextSample(6,n);return 0===t?function(e,a,t,r){return e>=Math.pow(2,r-1)?e*a+t:(e+1-Math.pow(2,r))*a+t}(i,r,a,n):1===t?(i+Math.pow(2,n)-1)*r+a:a-(i+(Math.pow(2,n)-1))*r}Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},e.exports={normalisation_batch:function(e){for(var s=e.date,c=function(e,s,c,l){var _=function(){for(var e=[],a=0;a<16;)e.push({codingType:0,codingTable:0,resolution:null,uncompressSamples:[]}),a+=1;return{batch_counter:0,batch_relative_timestamp:0,series:e}}(),u=function(e){function r(e,a,t){var r=a,n=t-1;if(8*e.length<r+t)throw new Error("Batch : Verify that dest buf is large enough");for(var i=0,o=0;t>0;)e[r>>3]&1<<(7&r)&&(o|=1<<n-i),t--,i++,r++;return o}return{i1:0,byteArray:e,getNextSample:function(e,t){var r=t||a[e],n=this.i1;if(this.i1+=r,12===e&&32!==r)throw new Error("Batch : Mauvais sampletype");var i=0,o=Math.trunc((r-1)/8)+1,s=r%8;for(0===s&&o>0&&(s=8);o>0;){for(var d=0;s>0;){var c=n>>3;this.byteArray[c]&1<<(7&n)&&(i|=1<<8*(o-1)+d),s--,d++,n+=1}o--,s=8}if((3==e||5==e||7==e||9==e)&&i&1<<r-1)for(var l=r;l<32;l++)i|=1<<l,r++;return i},getNextBifromHi:function(e){for(var a=2;a<12;a++)for(var n=r(this.byteArray,this.i1,a),i=0;i<t[e].length;i++)if(t[e][i].sz==a&&n==t[e][i].lbl)return this.i1+=a,i;throw new Error("Bi not found in HUFF table")}}}(function(e){for(var a=[];e.length>=2;)a.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return a}(c)),p=function(e){for(var a=e.toString(2);a.length<8;)a="0"+a;return{isCommonTimestamp:parseInt(a[a.length-2],2),hasSample:!parseInt(a[a.length-3],2),batch_req:parseInt(a[a.length-4],2),nb_of_type_measure:parseInt(a.substring(0,4),2)}}(u.getNextSample(4));_.batch_counter=u.getNextSample(4,3),u.getNextSample(4,1);var m=function(e,a,t,o,s){for(var d=0,c=0,l=0;l<o.nb_of_type_measure;l++){var _={size:s,lbl:a.getNextSample(4,s)},u=n(t,_);0===l&&(c=u),d=i(a,d),e.series[u]=r(a,t[u].sampletype,_.lbl,d),o.hasSample&&(e.series[u].codingType=a.getNextSample(4,2),e.series[u].codingTable=a.getNextSample(4,2))}return{last_timestamp:d,i1_of_the_first_sample:c}}(_,u,s,p,e),f=m.last_timestamp,v=m.i1_of_the_first_sample;return p.hasSample&&(f=function(e,a,t,r,i,s,c){return s.isCommonTimestamp?function(e,a,t,r,i,o){for(var s=a.getNextSample(4,8),c={},l=function(e,a,t,r){for(var n=[],i=0,o=a.getNextSample(4,2),s=0;s<t;s++){var d=a.getNextBifromHi(o);if(d<=14)if(0===s)n.push(e.series[r].uncompressSamples[0].data_relative_timestamp);else{var c=n[s-1];d>0?n.push(a.getNextSample(10,d)+c+Math.pow(2,d)-1):n.push(c)}else n.push(a.getNextSample(10));i=n[s]}return{timestampCommon:n,lastTimestamp:i}}(e,a,s,t),_=l.timestampCommon,u=l.lastTimestamp,p=0;p<i.nb_of_type_measure;p++){var m=1;c.lbl=a.getNextSample(4,o);for(var f=n(r,c),v=0;v<s;v++)if(a.getNextSample(4,1)){var b=a.getNextBifromHi(e.series[f].codingTable),y={data_relative_timestamp:0,data:{}};if(b<=14){var g=e.series[f].uncompressSamples[e.series[f].uncompressSamples.length-1].data.value;if(b>0)y.data.value=d(a,g,e.series[f].codingType,r[f].resol,b);else{if(m){m=0;continue}y.data.value=g}}else y.data.value=a.getNextSample(r[f].sampletype);y.data_relative_timestamp=_[v],e.series[f].uncompressSamples.push(y)}}return u}(e,a,t,r,s,c):function(e,a,t,r,i,s){for(var c={},l=0;l<i.nb_of_type_measure;l++){c.lbl=a.getNextSample(4,s);var _=n(t,c),u=a.getNextSample(4,8);if(u)for(var p=a.getNextSample(4,2),m=0;m<u;m++){var f=e.series[_].uncompressSamples[e.series[_].uncompressSamples.length-1].data_relative_timestamp,v={data_relative_timestamp:0,data:{}},b=a.getNextBifromHi(p);if(v.data_relative_timestamp=o(a,f,b),v.data_relative_timestamp>r&&(r=v.data_relative_timestamp),(b=a.getNextBifromHi(e.series[_].codingTable))<=14){var y=e.series[_].uncompressSamples[e.series[_].uncompressSamples.length-1].data.value;v.data.value=b>0?d(a,y,e.series[_].codingType,t[_].resol,b):y}else v.data.value=a.getNextSample(t[_].sampletype);e.series[_].uncompressSamples.push(v)}}return r}(e,a,r,i,s,c)}(_,u,v,s,f,p,e)),_.batch_relative_timestamp=i(u,f),function(e,a,t){var r={batch_counter:e.batch_counter,batch_relative_timestamp:e.batch_relative_timestamp};return t&&(r.batch_absolute_timestamp=t),r.dataset=e.series.reduce((function(r,n,i){return r.concat(n.uncompressSamples.map((function(r){var n,o,s,d={data_relative_timestamp:r.data_relative_timestamp,data:{value:a[i].divide?r.data.value/a[i].divide:r.data.value,label:a[i].taglbl}};return a[i].lblname&&(d.data.label_name=a[i].lblname),t&&(d.data_absolute_timestamp=(n=t,o=e.batch_relative_timestamp,s=r.data_relative_timestamp,new Date(new Date(n).getTime()-1e3*(o-s)).toISOString())),d})))}),[]),r}(_,s,l)}(e.batch1,e.batch2,e.payload,s),l=[],_=0;_<c.dataset.length;_++){var u=c.dataset[_],p={variable:u.data.label_name,value:u.data.value,date:u.data_absolute_timestamp};l.push(p)}return l}}},839:function(e){e.exports={UintToInt:function(e,a){if(a<1||a>4)throw new Error("Unsupported Size");return 1===a&&(128&e)>0?e-=256:2===a&&(32768&e)>0?e-=65536:3===a&&(8388608&e)>0?e-=16777216:4===a&&(2147483648&e)>0&&(e-=4294967296),e},Bytes2Float32:function(e){var a=2147483648&e?-1:1,t=(e>>23&255)-127,r=8388607&e;if(128===t)return a*(r?Number.NaN:Number.POSITIVE_INFINITY);if(-127===t){if(0===r)return 0;t=-126,r/=1<<23}else r=(r|1<<23)/(1<<23);return a*r*Math.pow(2,t)},BytesToInt64:function(e,a,t,r){void 0===r&&(r=!1);var n,i,o="U"!=t.substr(0,1),s=parseInt(t.substr(1,2),10)/8,d=s;r?(n=-1,i=a+s-1):(n=1,i=a);for(var c=0,l=i;d>0;l+=n,d--)c=(c<<8)+e[l];return o&&s<8&&128&e[i]&&(c-=1<<8*s),c},decimalToHex:function(e,a){var t=e.toString(16).toUpperCase();for(a=null!=a?a:2;t.length<a;)t="0"+t;return"0x"+t},zeroPad:function(e,a){for(var t=String(e);t.length<a;)t="0"+t;return t},BytesToHexStr:function(e){for(var a="",t=0;t<e.length;t++){var r=e[t].toString(16).toUpperCase();1===r.length&&(r="0"+r),a+=r}return a}}},174:function(e,a,t){var r=t(907),n=t(652);function i(e){var a,t=null==(a=e)?{}:Array.isArray(a)?{samples:a}:"object"==_typeof(a)?a:"string"==typeof a||"number"==typeof a?{value:a}:{};if(!t.samples||!Array.isArray(t.samples))return t;var r=t.samples,n={};r.forEach((function(e){if("object"==_typeof(e)&&e.variable&&void 0!==e.value&&e.date){var a=e.variable,t=e.value,r=e.date;(!n[a]||new Date(r)>new Date(n[a].date))&&(n[a]={value:t,date:r})}}));var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);for(var s in n)n.hasOwnProperty(s)&&!i.hasOwnProperty(s)&&(i[s]=n[s].value);return i}e.exports={watteco_decodeUplink:function(e,a,t){e.bytes,e.fPort;var o=e.recvTime;try{var s=r.normalisation_standard(e,t),d=s.payload;if("batch"!==s.type)return{data:i(s.data),warnings:s.warning};var c={batch1:a[0],batch2:a[1],payload:d,date:o};try{return{data:i(n.normalisation_batch(c)),warnings:[]}}catch(e){return{errors:e.message,warnings:[]}}}catch(e){return{errors:e.message,warnings:[]}}}}},907:function(e,a,t){var r=t(839),n=r.UintToInt,i=r.Bytes2Float32,o=r.BytesToInt64,s=r.decimalToHex,d=r.zeroPad,c=(r.BytesToHexStr,function(){function e(a){var t;return _classCallCheck(this,e),(t=_callSuper(this,e,[a])).name="ValidationError",t}return _inherits(e,_wrapNativeSuper(Error)),_createClass(e)}()),l={16:{name:"boolean",size:1},8:{name:"general8",size:1},9:{name:"general16",size:2},10:{name:"general24",size:3},11:{name:"general32",size:4},24:{name:"bitmap8",size:1},25:{name:"bitmap16",size:2},32:{name:"uint8",size:1},33:{name:"uint16",size:2},34:{name:"uint24",size:3},35:{name:"uint32",size:4},40:{name:"int8",size:1},41:{name:"int16",size:2},43:{name:"int32",size:4},48:{name:"enum8",size:1},66:{name:"char string",size:1},65:{name:"bytes string",size:1},67:{name:"long bytes string",size:2},76:{name:"structured ordered sequence",size:2},57:{name:"single",size:4}},_={32778:{0:{0:{divider:1,function_type:"int",name:"positive_active_energy",size:4},1:{divider:1,function_type:"int",name:"negative_active_energy",size:4},2:{divider:1,function_type:"int",name:"positive_reactive_energy",size:4},3:{divider:1,function_type:"int",name:"negative_reactive_energy",size:4},4:{divider:1,function_type:"int",name:"positive_active_power",size:4},5:{divider:1,function_type:"int",name:"negative_active_power",size:4},6:{divider:1,function_type:"int",name:"positive_reactive_power",size:4},7:{divider:1,function_type:"int",name:"negative_reactive_power",size:4}}},32784:{0:{0:{divider:1,function_type:"int",name:"active_energy_a",size:4},1:{divider:1,function_type:"int",name:"reactive_energy_a",size:4},2:{divider:1,function_type:"int",name:"active_energy_b",size:4},3:{divider:1,function_type:"int",name:"reactive_energy_b",size:4},4:{divider:1,function_type:"int",name:"active_energy_c",size:4},5:{divider:1,function_type:"int",name:"reactive_energy_c",size:4},6:{divider:1,function_type:"int",name:"active_energy_abc",size:4},7:{divider:1,function_type:"int",name:"reactive_energy_abc",size:4}},1:{0:{divider:1,function_type:"int",name:"active_power_a",size:4},1:{divider:1,function_type:"int",name:"reactive_power_a",size:4},2:{divider:1,function_type:"int",name:"active_power_b",size:4},3:{divider:1,function_type:"int",name:"reactive_power_b",size:4},4:{divider:1,function_type:"int",name:"active_power_c",size:4},5:{divider:1,function_type:"int",name:"reactive_power_c",size:4},6:{divider:1,function_type:"int",name:"active_power_abc",size:4},7:{divider:1,function_type:"int",name:"reactive_power_abc",size:4}}},32779:{0:{0:{divider:10,function_type:"int",name:"Vrms",size:2},1:{divider:10,function_type:"int",name:"Irms",size:2},2:{divider:1,function_type:"int",name:"angle",size:2}}},32781:{0:{0:{divider:10,function_type:"int",name:"Vrms_a",size:2},1:{divider:10,function_type:"int",name:"Irms_a",size:2},2:{divider:1,function_type:"int",name:"angle_a",size:2},3:{divider:10,function_type:"int",name:"Vrms_b",size:2},4:{divider:10,function_type:"int",name:"Irms_b",size:2},5:{divider:1,function_type:"int",name:"angle_b",size:2},6:{divider:10,function_type:"int",name:"Vrms_c",size:2},7:{divider:10,function_type:"int",name:"Irms_c",size:2},8:{divider:1,function_type:"int",name:"angle_c",size:2}}},32850:{0:{0:{divider:1e3,function_type:"int",name:"frequency",size:2},1:{divider:1e3,function_type:"int",name:"frequency_min",size:2},2:{divider:1e3,function_type:"int",name:"frequency_max",size:2},3:{divider:10,function_type:"int",name:"Vrms",size:2},4:{divider:10,function_type:"int",name:"Vrms_min",size:2},5:{divider:10,function_type:"int",name:"Vrms_max",size:2},6:{divider:10,function_type:"int",name:"Vpeak",size:2},7:{divider:10,function_type:"int",name:"Vpeak_min",size:2},8:{divider:10,function_type:"int",name:"Vpeak_max",size:2},9:{divider:1,function_type:"int",name:"over_voltage",size:2},10:{divider:1,function_type:"int",name:"sag_voltage",size:2}}},32773:{0:{0:{divider:1,function_type:"none",name:"pin_state_1",size:1},1:{divider:1,function_type:"none",name:"pin_state_2",size:1},2:{divider:1,function_type:"none",name:"pin_state_3",size:1},3:{divider:1,function_type:"none",name:"pin_state_4",size:1},4:{divider:1,function_type:"none",name:"pin_state_5",size:1},5:{divider:1,function_type:"none",name:"pin_state_6",size:1},6:{divider:1,function_type:"none",name:"pin_state_7",size:1},7:{divider:1,function_type:"none",name:"pin_state_8",size:1},8:{divider:1,function_type:"none",name:"pin_state_9",size:1},9:{divider:1,function_type:"none",name:"pin_state_10",size:1}}},80:{6:{0:{divider:1e3,function_type:"none",name:"power_modes",size:2},1:{divider:1e3,function_type:"none",name:"current_power_source",size:2},2:{divider:1e3,function_type:"none",name:"constant_power",size:2},3:{divider:1e3,function_type:"none",name:"rechargeable_battery",size:2},4:{divider:1e3,function_type:"none",name:"disposable_battery",size:2},5:{divider:1e3,function_type:"none",name:"solar_harvesting",size:2},6:{divider:1e3,function_type:"none",name:"TIC_harvesting",size:2}}}};function u(e){var a="",t=e.toString(2);return a+=d(t,8)}function p(e,a,t,r,o,s,d,c,u,p){if(138===e||10==e){var m=l[d],f=u,v=m.size,b=m.name;void 0===f&&(f="single"===b?"float":"int8"===b||"int16"===b||"int32"===b?"int":"none");var y=function(e,a,t,r,o,s,d,c,l){var u={reportCauses:[],causesMessages:[]};138===e&&u.causesMessages.push("alarm triggered");var p=o;if(p>=r.length)return u;var m=!1,f=3&(r[o]>>=4);if(2==f)m=!0;else if(1!=f)throw new Error("Alarm decoding: Unexpected cause type. (ReportParams byte = ".concat(r[o],")"));if(++p>=r.length)throw new Error("Alarm decoding: Unexpected end of causes.)");function v(e,a,t){if(p+a-1>=r.length)throw new Error("Alarm decoding: Unexpected end of data while reading value.");for(var o=0,s=0;s<a;s++)o=o<<8|r[p++];if("int"===e)o=n(o,a);else{if("float"!==e)throw new Error("Alarm decoding: Unknown type kind: "+e);if(4!==a)throw new Error("Alarm decoding: Invalid float size. Only 4 bytes are supported.");o=i(o)}return o/t}for(;p<r.length;){var b={};if(p>=r.length)throw new Error("Alarm decoding: Unexpected end of data before reading CSD.");var y=r[p++];b.criterionIndex=7&y;var g=y>>3&3;b.mode=1===g?"delta":2===g?"threshold":"unused",b.hasFallen=!!(32&y),b.hasExceeded=!!(64&y),b.isAlarm=!!(128&y);var h=void 0,z=void 0,w=void 0,x=void 0,S=void 0,P=void 0,E=void 0,I=b.hasExceeded&&b.hasFallen?"exceed&fall":b.hasExceeded?"exceed":b.hasFallen?"fall":"",N=null;if(m){if(p>=r.length)throw new Error("Alarm decoding: Unexpected end of data before reading FI.");var U=s,T=d,O=c;if(b.fieldIndex=0,null!=l&&!0===l&&(N=r[p++],b.fieldIndex=N,_[a]&&_[a][t]&&_[a][t][N])){var D=_[a][t][N];U=D.function_type||s,T=D.size||d,O=D.divider||c,P=D.name||"FieldUndef !"}h=v(U,T,O),"threshold"===b.mode&&(z=v(U,T,O))}if("threshold"===b.mode&&m){if(p>=r.length)throw new Error("Alarm decoding: Unexpected end of data before reading Occ.");var C=r[p++];if(w=C,C>0&&128&C){if(p+3>=r.length)throw new Error("Alarm decoding: Invalid OccH or OccL read.");x=r[p++]<<8|r[p++],S=r[p++]<<8|r[p++]}}u.reportCauses.push(b),m?(E="threshold"===b.mode?void 0!==x?"cause:{alarm:".concat(b.isAlarm,", criterion_index: ").concat(b.criterionIndex,", mode: threshold, crossing: ").concat(I,", value: ").concat(h,", gap: ").concat(z,", occurences_up: ").concat(x,", occurences_down: ").concat(S):"cause:{alarm:".concat(b.isAlarm,", criterion_index: ").concat(b.criterionIndex,", mode: threshold, crossing: ").concat(I,", value: ").concat(h,", gap: ").concat(z,", occurences: ").concat(w):"cause:{alarm:".concat(b.isAlarm,", criterion_index: ").concat(b.criterionIndex,", mode: delta, value: ").concat(h),P&&(E+=", field: ".concat(P)),E+="}"):(E="cause:{alarm:".concat(b.isAlarm,", criterion_index: ").concat(b.criterionIndex,", mode: ").concat(b.mode),"threshold"===b.mode&&(E+=", crossing: ".concat(I)),E+="}"),u.causesMessages.push(E)}if(p!==r.length)throw new Error("Alarm decoding: Remaining unprocessed bytes detected. Expected ".concat(r.length,", but stopped at ").concat(p,"."));return u}(e,a,t,r,s,f,v,c,p);o.zclheader.alarmmsg=y.causesMessages}}e.exports={normalisation_standard:function(e,a){var t=[],r=e.bytes,d=function(e,a){var t={},r=0;t.lora={},t.lora.port=a;var d=e.length,l="";t.lora.payload="";for(var _=0;_<d;_++){1===(l=e[_].toString(16).toUpperCase()).length&&(l="0"+l),t.lora.payload+=l;var m=new Date;t.lora.date=m.toISOString()}if(125===a)if(0==!(1&e[0])){t.zclheader={},t.zclheader.report="standard";var f,v,b=-1;if(t.zclheader.endpoint=(224&e[0])>>5|(6&e[0])<<2,f=e[1],t.zclheader.cmdID=s(f,2),v=256*e[2]+e[3],t.zclheader.clustID=s(v,4),10===f||138===f||1===f){r=1,t.data={},b=256*e[4]+e[5],t.zclheader.attID=s(b,4);var y=e[4],g=0;if(10!==f&&138!==f||(g=7),138===f&&(t.zclheader.alarm=1),1===f&&(g=8,t.zclheader.status=e[6]),83===v||84===v||85===v||86===v||87===v){if("function"!=typeof globalThis.TIC_Decode)throw new c("TIC_Decode function not found");t.data=globalThis.TIC_Decode(v,b,e.slice(g+1))}if(0===v&&2===b){t.data.firmware="";for(var h=0;h<3;h++)t.data.firmware+=String(e[g+h]),h<2&&(t.data.firmware+=".");var z=256*e[g+3]*256+256*e[g+4]+e[g+5];t.data.firmware+="."+z.toString()}if(0===v&&3===b){var w=e[g];t.data.kernel="";for(var x=0;x<w;x++)t.data.kernel+=String.fromCharCode(e[g+1+x])}if(0===v&&4===b){var S=e[g];t.data.manufacturer="";for(var P=0;P<S;P++)t.data.manufacturer+=String.fromCharCode(e[g+1+P])}if(0===v&&5===b){var E=e[g];t.data.model="";for(var I=0;I<E;I++)t.data.model+=String.fromCharCode(e[g+1+I])}if(0===v&&6===b){var N=e[g];t.data.date="";for(var U=0;U<N;U++)t.data.date+=String.fromCharCode(e[g+1+U])}if(0===v&&16===b){var T=e[g];t.data.position="";for(var O=0;O<T;O++)t.data.position+=String.fromCharCode(e[g+1+O])}if(0===v&&32769===b){var D=e[g];t.data.application_name="";for(var C=0;C<D;C++)t.data.application_name+=String.fromCharCode(e[g+1+C])}if(1026===v&&0===b){var M=e[g-1];t.data.temperature=n(256*e[g]+e[g+1],2)/100,p(f,v,b,e,t,g+2,M,100,"int")}if(1026===v&&1===b&&(t.data.min_temperature=n(256*e[g]+e[g+1],2)/100),1026===v&&2===b&&(t.data.max_temperature=n(256*e[g]+e[g+1],2)/100),1029===v&&0===b){var A=e[g-1];t.data.humidity=(256*e[g]+e[g+1])/100,p(f,v,b,e,t,g+2,A,100,"none")}if(1029===v&&1===b&&(t.data.min_humidity=(256*e[g]+e[g+1])/100),1029===v&&2===b&&(t.data.max_humidity=(256*e[g]+e[g+1])/100),15===v&&1026===b){var q=e[g-1];t.data.index=256*e[g]*256*256+256*e[g+1]*256+256*e[g+2]+e[g+3],p(f,v,b,e,t,g+4,q,1,"none")}if(15===v&&85===b){var k=e[g-1];t.data.pin_state=!!e[g],p(f,v,b,e,t,g+1,k,1,"none")}if(15===v&&84===b&&(0===e[g]&&(t.data.polarity="normal"),1===e[g]&&(t.data.polarity="reverse")),15===v&&1024===b&&(0===e[g]&&(t.data.edge_selection="none"),1===e[g]&&(t.data.edge_selection="falling edge"),2===e[g]&&(t.data.edge_selection="rising edge"),3===e[g]&&(t.data.edge_selection="both edges"),5===e[g]&&(t.data.edge_selection="polling and falling edge"),6===e[g]&&(t.data.edge_selection="polling and rising edge"),7===e[g]&&(t.data.edge_selection="polling and both edges")),15===v&&1025===b&&(t.data.debounce_period=e[g]),15===v&&1027===b&&(t.data.poll_period=e[g]),15===v&&1028===b&&(t.data.force_notify=e[g]),19===v&&85===b){var V=e[g-1];t.data.output_value=e[g],p(f,v,b,e,t,g+1,V,1,"none")}if(6===v&&0===b){var H=e[g];t.data.output=1===H?"ON":"OFF"}if(32776===v&&0===b){var B=e[g-1];t.data.differential_pressure=256*e[g]+e[g+1],p(f,v,b,e,t,g+2,B,1,"none")}if(32773===v&&0===b){var F=e[g-1];t.data.pin_state_1=!(1&~e[g+1]),t.data.pin_state_2=!(2&~e[g+1]),t.data.pin_state_3=!(4&~e[g+1]),t.data.pin_state_4=!(8&~e[g+1]),t.data.pin_state_5=!(16&~e[g+1]),t.data.pin_state_6=!(32&~e[g+1]),t.data.pin_state_7=!(64&~e[g+1]),t.data.pin_state_8=!(128&~e[g+1]),t.data.pin_state_9=!(1&~e[g]),t.data.pin_state_10=!(2&~e[g]),p(f,v,b,e,t,g+2,F,100,"none")}if(32774===v&&0===b&&(t.data.speed=256*e[g]*256+256*e[g+1]+e[g+2]),32774===v&&1===b&&(t.data.data_bit=e[g]),32774===v&&2===b&&(t.data.parity=e[g]),32774===v&&3===b&&(t.data.stop_bit=e[g]),12===v&&85===b){var j=e[g-1];t.data.analog=i(256*e[g]*256*256+256*e[g+1]*256+256*e[g+2]+e[g+3]),p(f,v,b,e,t,g+4,j,1,"float")}if(12===v&&256===b&&(5===e[g+1]&&(t.data.type="ppm"),255===e[g+1]&&0===e[g+3]&&(t.data.type="mA"),255===e[g+1]&&1===e[g+3]&&(t.data.type="mV")),12===v&&32771===b&&(t.data.power_duration=256*e[g]+e[g+1]),12===v&&32772===b){var R={},G=u(e[g]),Y=u(e[g+1]),X=2*G[0]+G[1];0===X&&(R.mode="idle"),1===X&&(R.mode="chock"),2===X&&(R.mode="click");var Z=8*G[2]+4*G[3]+2*G[4]+G[5];0===Z&&(R.frequency="idle"),1===Z&&(R.frequency="1Hz"),2===Z&&(R.frequency="10Hz"),3===Z&&(R.frequency="25Hz"),4===Z&&(R.frequency="50Hz"),5===Z&&(R.frequency="100Hz"),6===Z&&(R.frequency="200Hz"),7===Z&&(R.frequency="400Hz"),8===Z&&(R.frequency="1620Hz"),9===Z&&(R.frequency="5376Hz"),R.range={};var K=2*G[6]+G[7];0===K&&(R.range.precision="+/- 2g",R.range.value=16),1===K&&(R.range.precision="+/- 4g",R.range.value=32),2===K&&(R.range.precision="+/- 8g",R.range.value=64),3===K&&(R.range.precision="+/- 16g",R.range.value=128);var L=128*Y[0]+64*Y[1]+32*Y[2]+16*Y[3]+8*Y[4]+4*Y[5]+2*Y[6]+Y[7];R.threshold=L*R.range.value}if(32775===v&&1===b){t.data.modbus_payload="";for(var W=e[g],J=0;J<W;J++)l=e[g+J+1].toString(16).toUpperCase(),0===J?t.data.modbus_slaveID=e[g+J+1]:1===J?t.data.modbus_fnctID=e[g+J+1]:2===J?t.data.modbus_datasize=e[g+J+1]:t.data.modbus_payload+=l}if(32777===v&&0===b){var Q=e[g+2]<<8|e[g+3];t.data.modbus_frame_series_sent=e[g+1],t.data.modbus_frame_number_in_serie=(57344&Q)>>13,t.data.modbus_last_frame_of_serie=(7168&Q)>>10;for(var $=0;$<=9;$++)t.data["modbus_EP".concat($)]=!!(Q&1<<$);function Fe(e,a,t,r,n,i){if(!0===e){if(0===t&&(n.data["modbus_slaveID_EP".concat(i)]=r[a],n.data["modbus_fnctID_EP".concat(i)]=r[a+1],n.data["modbus_datasize_EP".concat(i)]=r[a+2],a+=3),n.data["modbus_payload_EP".concat(i)]="",void 0===r[a])return n;for(var o=0;o<n.data["modbus_datasize_EP".concat(i)];o++){var s=r[a+o].toString(16).toUpperCase();1===s.length&&(s="0"+s),n.data["modbus_payload_EP".concat(i)]+=s}a+=n.data["modbus_datasize_EP".concat(i)]}return a}for(var ee=g+4,ae=0;ae<=9;ae++)ee=Fe(t.data["modbus_EP".concat(ae)],ee,0,e,t,ae)}if(82===v&&0===b&&(t.data.active_energy=n(256*e[g+1]*256+256*e[g+2]+e[g+3],3),t.data.reactive_energy=n(256*e[g+4]*256+256*e[g+5]+e[g+6],3),t.data.nb_samples=256*e[g+7]+e[g+8],t.data.active_power=n(256*e[g+9]+e[g+10],2),t.data.reactive_power=n(256*e[g+11]+e[g+12],2)),32772===v&&0===b&&(1===e[g]&&(t.data.message_type="confirmed"),0===e[g]&&(t.data.message_type="unconfirmed")),32772===v&&1===b&&(t.data.nb_retry=e[g]),32772===v&&2===b&&(t.data.automatic_association={},t.data.automatic_association.period_in_minutes=256*e[g+1]+e[g+2],t.data.automatic_association.nb_err_frames=256*e[g+3]+e[g+4]),32772===v&&3===b&&(t.data.data_rate=e[g+2]),32772===v&&4===b){t.data.ABP_dev_address="";for(var te=0;te<4;te++)t.data.ABP_dev_address+=String(e[g+1+te]),te<3&&(t.data.ABP_dev_address+=".")}if(32772===v&&5===b){t.data.OTA_app_EUI="";for(var re=0;re<8;re++)t.data.OTA_app_EUI+=String(e[g+1+re]),re<7&&(t.data.OTA_app_EUI+=".")}if(80===v&&4===b){e[g],e[g+1];for(var ne={},ie=e[g+2],oe=0;oe<ie;oe++){var se={};se.endpoint=e[g+3+7*oe];var de=e[g+4+7*oe];se.input_clusters=[];for(var ce=0;ce<de;ce++)se.input_clusters[ce]=s(256*e[g+5+7*oe+2*ce]+e[g+6+7*oe+2*ce],4);var le=e[g+5+7*oe+2*de];se.output_clusters=[];for(var _e=0;_e<le;_e++)se.output_clusters[_e]=s(256*e[g+6+7*oe+2*_e]+e[g+7+7*oe+2*_e],4);ne[oe]=se}t.data.configuration=ne}if(80===v&&6===b){var ue=g+3,pe=e[g-1];1&~e[g+2]||(t.data.main_or_external_voltage=(256*e[ue]+e[ue+1])/1e3,ue+=2),2&~e[g+2]||(t.data.rechargeable_battery_voltage=(256*e[ue]+e[ue+1])/1e3,ue+=2),4&~e[g+2]||(t.data.disposable_battery_voltage=(256*e[ue]+e[ue+1])/1e3,ue+=2),8&~e[g+2]||(t.data.solar_harvesting_voltage=(256*e[ue]+e[ue+1])/1e3,ue+=2),16&~e[g+2]||(t.data.tic_harvesting_voltage=(256*e[ue]+e[ue+1])/1e3,ue+=2),p(f,v,b,e,t,ue+1,pe,1e3,"multistate",!0)}if(80===v&&255===y){var me="action "+e[5].toString();t.data[me]="";for(var fe=e[g+1],ve="none",be=0;be<fe;be++)ve+=String.fromCharCode(e[g+1+be]);t.data[me]=ve}if(32778===v&&0===b){var ye=g,ge=e[ye-1];t.data.positive_active_energy=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),ye+=4,t.data.negative_active_energy=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),ye+=4,t.data.positive_reactive_energy=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),ye+=4,t.data.negative_reactive_energy=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),ye+=4,t.data.positive_active_power=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),ye+=4,t.data.negative_active_power=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),ye+=4,t.data.positive_reactive_power=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),ye+=4,t.data.negative_reactive_power=n(256*e[ye+1]*256*256+256*e[ye+2]*256+256*e[ye+3]+e[ye+4],4),p(f,v,b,e,t,ye+5,ge,1,"multistate",!0)}if(32784===v&&0===b){var he=e[g-1];t.data.active_energy_a=n(256*e[g+1]*256*256+256*e[g+2]*256+256*e[g+3]+e[g+4]),t.data.reactive_energy_a=n(256*e[g+5]*256*256+256*e[g+6]*256+256*e[g+7]+e[g+8]),t.data.active_energy_b=n(256*e[g+9]*256*256+256*e[g+10]*256+256*e[g+11]+e[g+12]),t.data.reactive_energy_b=n(256*e[g+13]*256*256+256*e[g+14]*256+256*e[g+15]+e[g+16]),t.data.active_energy_c=n(256*e[g+17]*256*256+256*e[g+18]*256+256*e[g+19]+e[g+20]),t.data.reactive_energy_c=n(256*e[g+21]*256*256+256*e[g+22]*256+256*e[g+23]+e[g+24]),t.data.active_energy_abc=n(256*e[g+25]*256*256+256*e[g+26]*256+256*e[g+27]+e[g+28]),t.data.reactive_energy_abc=n(256*e[g+29]*256*256+256*e[g+30]*256+256*e[g+31]+e[g+32]),p(f,v,b,e,t,g+33,he,1,"multistate",!0)}else if(32784===v&&1===b){var ze=e[g-1];t.data.active_power_a=n(256*e[g+1]*256*256+256*e[g+2]*256+256*e[g+3]+e[g+4]),t.data.reactive_power_a=n(256*e[g+5]*256*256+256*e[g+6]*256+256*e[g+7]+e[g+8]),t.data.active_power_b=n(256*e[g+9]*256*256+256*e[g+10]*256+256*e[g+11]+e[g+12]),t.data.reactive_power_b=n(256*e[g+13]*256*256+256*e[g+14]*256+256*e[g+15]+e[g+16]),t.data.active_power_c=n(256*e[g+17]*256*256+256*e[g+18]*256+256*e[g+19]+e[g+20]),t.data.reactive_power_c=n(256*e[g+21]*256*256+256*e[g+22]*256+256*e[g+23]+e[g+24]),t.data.active_power_abc=n(256*e[g+25]*256*256+256*e[g+26]*256+256*e[g+27]+e[g+28]),t.data.reactive_power_abc=n(256*e[g+29]*256*256+256*e[g+30]*256+256*e[g+31]+e[g+32]),p(f,v,b,e,t,g+33,ze,1,"multistate",!0)}if(32779===v&&0===b){var we=g,xe=e[we-1];t.data.Vrms=n(256*e[we+1]+e[we+2],2)/10,we+=2,t.data.Irms=n(256*e[we+1]+e[we+2],2)/10,we+=2,t.data.angle=n(256*e[we+1]+e[we+2],2),p(f,v,b,e,t,we+3,xe,1,"multistate",!0)}if(32781===v&&0===b){var Se=e[g-1];t.data.Vrms_a=n(256*e[g+1]+e[g+2],2)/10,t.data.Irms_a=n(256*e[g+3]+e[g+4],2)/10,t.data.angle_a=n(256*e[g+5]+e[g+6],2),t.data.Vrms_b=n(256*e[g+7]+e[g+8],2)/10,t.data.Irms_b=n(256*e[g+9]+e[g+10],2)/10,t.data.angle_b=n(256*e[g+11]+e[g+12],2),t.data.Vrms_c=n(256*e[g+13]+e[g+14],2)/10,t.data.Irms_c=n(256*e[g+15]+e[g+16],2)/10,t.data.angle_c=n(256*e[g+17]+e[g+18],2),p(f,v,b,e,t,g+19,Se,1,"multistate",!0)}if(32780===v&&0===b){var Pe=e[g-1];t.data.concentration=256*e[g]+e[g+1],p(f,v,b,e,t,g+2,Pe,1,"none")}if(32780===v&&1===b&&(t.data.analog=e[g]),32780===v&&2===b&&(t.data.analog=e[g]),1024===v&&0===b){var Ee=e[g-1];t.data.illuminance=256*e[g]+e[g+1],p(f,v,b,e,t,g+2,Ee,1,"none")}if(1027===v&&0===b){var Ie=e[g-1];t.data.pressure=n(256*e[g]+e[g+1],2),p(f,v,b,e,t,g+2,Ie,1,"int")}if(1030===v&&0===b){var Ne=e[g-1];t.data.occupancy=!!e[g],p(f,v,b,e,t,g+1,Ne,1,"none")}if(32850===v&&0===b){var Ue=g;t.data.frequency=(n(256*e[Ue+1]+e[Ue+2],2)+22232)/1e3,Ue+=2,t.data.frequency_min=(n(256*e[Ue+1]+e[Ue+2],2)+22232)/1e3,Ue+=2,t.data.frequency_max=(n(256*e[Ue+1]+e[Ue+2],2)+22232)/1e3,Ue+=2,t.data.Vrms=n(256*e[Ue+1]+e[Ue+2],2)/10,Ue+=2,t.data.Vrms_min=n(256*e[Ue+1]+e[Ue+2],2)/10,Ue+=2,t.data.Vrms_max=n(256*e[Ue+1]+e[Ue+2],2)/10,Ue+=2,t.data.Vpeak=n(256*e[Ue+1]+e[Ue+2],2)/10,Ue+=2,t.data.Vpeak_min=n(256*e[Ue+1]+e[Ue+2],2)/10,Ue+=2,t.data.Vpeak_max=n(256*e[Ue+1]+e[Ue+2],2)/10,Ue+=2,t.data.over_voltage=n(256*e[Ue+1]+e[Ue+2],2),Ue+=2,t.data.sag_voltage=n(256*e[Ue+1]+e[Ue+2],2)}if(32783===v){var Te=g+1;if(0===b){var Oe=t.data.last={};Oe.NbTriggedAcq=o(e,Te,"U32"),Te+=4,Oe.Mean_X_G=o(e,Te,"U16")/100,Te+=2,Oe.Max_X_G=o(e,Te,"U16")/100,Te+=2,Oe.Dt_X_ms=o(e,Te,"U16"),Te+=2,Oe.Mean_Y_G=o(e,Te,"U16")/100,Te+=2,Oe.Max_Y_G=o(e,Te,"U16")/100,Te+=2,Oe.Dt_Y_ms=o(e,Te,"U16"),Te+=2,Oe.Mean_Z_G=o(e,Te,"U16")/100,Te+=2,Oe.Max_Z_G=o(e,Te,"U16")/100,Te+=2,Oe.Dt_Z_ms=o(e,Te,"U16")}else if(1===b||2===b||3===b){var De=1===b?"Stats_X":2===b?"Stats_Y":"Stats_Z",Ce=t.data[De]={};Ce.NbAcq=o(e,Te,"U16"),Te+=2,Ce.MinMean_G=o(e,Te,"U16")/100,Te+=2,Ce.MinMax_G=o(e,Te,"U16")/100,Te+=2,Ce.MinDt=o(e,Te,"U16"),Te+=2,Ce.MeanMean_G=o(e,Te,"U16")/100,Te+=2,Ce.MeanMax_G=o(e,Te,"U16")/100,Te+=2,Ce.MeanDt=o(e,Te,"U16"),Te+=2,Ce.MaxMean_G=o(e,Te,"U16")/100,Te+=2,Ce.MaxMax_G=o(e,Te,"U16")/100,Te+=2,Ce.MaxDt=o(e,Te,"U16"),Te+=2}else if(32768===b){var Me=t.data.params={};Me.WaitFreq_Hz=o(e,Te,"U16")/10,Te+=2,Me.AcqFreq_Hz=o(e,Te,"U16")/10;var Ae=o(e,Te+=2,"U16");Te+=2,32768&Ae&&(Ae=60*(-32769&Ae)),Me.NewWaitDelay_s=32768&Ae?Ae=60*(-32769&Ae):Ae,Me.MaxAcqDuration_ms=o(e,Te,"U16"),Te+=2,Me.Threshold_X_G=o(e,Te,"U16")/100,Te+=2,Me.Threshold_Y_G=o(e,Te,"U16")/100,Te+=2,Me.Threshold_Z_G=o(e,Te,"U16")/100,Te+=2,Me.OverThrsh_Dt_ms=o(e,Te,"U16"),Te+=2,Me.UnderThrsh_Dt_ms=o(e,Te,"U16"),Te+=2,Me.Range_G=o(e,Te,"U16")/100,Te+=2,Me.FilterSmoothCoef=o(e,Te,"U8"),Te+=1,Me.FilterGainCoef=o(e,Te,"U8"),Te+=1,(Me=t.data.Params.working_modes={}).SignalEachAcq=128&e[Te]?"true":"false",Me.RstAftStdRpt_X=1&e[Te]?"true":"false",Me.RstAftStdRpt_Y=2&e[Te]?"true":"false",Me.RstAftStdRpt_7=4&e[Te]?"true":"false"}}var qe=Object.keys(t.data)[0];if(void 0===t.data[qe])throw new c("bad payload1");if(e.length<=7)throw new c("bad payload2")}if(7===f){r=1,b=256*e[6]+e[7],t.zclheader.attID=s(b,4),t.zclheader.status=e[4],t.zclheader.report_parameters={};var ke=u(e[5]);t.zclheader.report_parameters.new_mode_configuration=ke[0],"0"===ke[2]&&"0"===ke[3]&&(t.zclheader.report_parameters.cause_request="none"),"0"===ke[2]&&"1"===ke[3]&&(t.zclheader.report_parameters.cause_request="short"),"1"===ke[2]&&"0"===ke[3]&&(t.zclheader.report_parameters.cause_request="long"),"1"===ke[2]&&"1"===ke[3]&&(t.zclheader.report_parameters.cause_request="reserved"),t.zclheader.report_parameters.secured_if_alarm=ke[4],t.zclheader.report_parameters.secured=ke[5],t.zclheader.report_parameters.no_hearde_port=ke[6],t.zclheader.report_parameters.batch=ke[7]}if(9===f){r=1,b=256*e[6]+e[7],t.zclheader.attID=s(b,4),t.zclheader.status=e[4],t.zclheader.report_parameters={};var Ve=u(e[5]);if(t.zclheader.report_parameters.new_mode_configuration=Ve[0],"0"===Ve[2]&&"0"===Ve[3]&&(t.zclheader.report_parameters.cause_request="none"),"0"===Ve[2]&&"1"===Ve[3]&&(t.zclheader.report_parameters.cause_request="short"),"1"===Ve[2]&&"0"===Ve[3]&&(t.zclheader.report_parameters.cause_request="long"),"1"===Ve[2]&&"1"===Ve[3]&&(t.zclheader.report_parameters.cause_request="reserved"),t.zclheader.report_parameters.secured_if_alarm=Ve[4],t.zclheader.report_parameters.secured=Ve[5],t.zclheader.report_parameters.no_hearde_port=Ve[6],t.zclheader.report_parameters.batch=Ve[7],t.zclheader.attribut_type=e[8],t.zclheader.min={},128&~e[9]?(t.zclheader.min.value=256*e[9]+e[10],t.zclheader.min.unit="seconds"):(t.zclheader.min.value=256*(e[9]-128)+e[10],t.zclheader.min.unit="minutes"),t.zclheader.max={},128&~e[11]?(t.zclheader.max.value=256*e[11]+e[12],t.zclheader.max.unit="seconds"):(t.zclheader.max.value=256*(e[11]-128)+e[12],t.zclheader.max.unit="minutes"),t.lora.payload="",80===v&&6===b)for(var He=e[13]/5,Be=0;He>0;)t.zclheader.modepower=e[14+5*Be],t.zclheader.powersource=e[15+5*Be],t.zclheader.delta=256*e[16+5*Be]+e[17+5*Be],t.zclheader.changedpowersource=e[18+5*Be],Be++,He--}if(0===r)throw new c("bad payload3")}else t.batch={},t.batch.report="batch";return t}(r,e.fPort);if(void 0!==d.zclheader){if(void 0!==d.zclheader.alarmmsg&&(t=d.zclheader.alarmmsg),7===r[1])return{data:d.zclheader,warning:t};if(9===r[1])return{data:d.zclheader,warning:t};if(1===r[1]){if(void 0===d.zclheader.data){for(var l=[],_=!0,m=0;_;){var f=Object.keys(d.data)[m];if(void 0===f){_=!1;break}l.push({variable:f,value:d.data[f],date:e.recvTime}),m++}return{data:l,type:"standard",warning:t}}return{data:{variable:"read reporting configuration response status",value:d.zclheader.data,date:e.recvTime},warning:t}}}if(void 0!==d.zclheader){if(void 0!==a){for(var v=d.zclheader.endpoint,b=!0,y=0,g=[],h="";b;){var z=Object.keys(d.data)[y];if(void 0===z){b=!1;break}void 0===a[z]?g.push({variable:z,value:d.data[z],date:e.recvTime}):"NA"===(h=a[z][v])?g.push({variable:h,value:"NA",date:e.recvTime}):g.push({variable:h,value:d.data[z],date:e.recvTime}),y++}return{data:g,type:"standard",warning:t}}throw new c("bad decoding")}return{type:d.batch.report,payload:d.lora.payload}}}},396:function(e,a,t){var r=t(174),n=[],i={modbus_payload:["modbus_payload_EP1","modbus_payload_EP2","modbus_payload_EP3","modbus_payload_EP4","modbus_payload_EP5","modbus_payload_EP6","modbus_payload_EP7","modbus_payload_EP8","modbus_payload_EP9"],modbus_slaveID:["modbus_slaveID_EP1","modbus_slaveID_EP2","modbus_slaveID_EP3","modbus_slaveID_EP4","modbus_slaveID_EP5","modbus_slaveID_EP6","modbus_slaveID_EP7","modbus_slaveID_EP8","modbus_slaveID_EP9"],modbus_fnctID:["modbus_fnctID_EP1","modbus_fnctID_EP2","modbus_fnctID_EP3","modbus_fnctID_EP4","modbus_fnctID_EP5","modbus_fnctID_EP6","modbus_fnctID_EP7","modbus_fnctID_EP8","modbus_fnctID_EP9"],modbus_datasize:["modbus_datasize_EP1","modbus_datasize_EP2","modbus_datasize_EP3","modbus_datasize_EP4","modbus_datasize_EP5","modbus_datasize_EP6","modbus_datasize_EP7","modbus_datasize_EP8","modbus_datasize_EP9"]};function o(e){return r.watteco_decodeUplink(e,n,i)}a.decodeUplink=o,(globalThis||this).decodeUplink=o}},a={},t=function t(r){var n=a[r];if(void 0!==n)return n.exports;var i=a[r]={exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}(396);driver=t}(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports.driver=driver);